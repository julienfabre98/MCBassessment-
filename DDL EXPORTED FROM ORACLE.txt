CREATE TABLE  "XXBCM_INVOICE" 
   (	"INVOICE_ID" NUMBER, 
	"INVOICE_REFERENCE" NUMBER(15,0), 
	"INVOICE_DATE" DATE, 
	"INVOICE_STATUS" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	"INVOICE_HOLD_REASON" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	"INVOICE_AMOUNT" NUMBER(10,0), 
	"INVOICE_DESCRIPTION" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	 CONSTRAINT "INVOICE_ID_PK" PRIMARY KEY ("INVOICE_ID")
  USING INDEX  ENABLE
   )  DEFAULT COLLATION "USING_NLS_COMP"
/
CREATE TABLE  "XXBCM_ORDER" 
   (	"ORDER_ID" NUMBER, 
	"ORDER_REF" VARCHAR2(15) COLLATE "USING_NLS_COMP", 
	"ORDER_DATE" DATE, 
	"ORDER_TOTAL_AMOUNT" NUMBER(15,0), 
	"ORDER_DESCRIPTION" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	"ORDER_STATUS" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	"ORDER_LINE_AMOUNT" NUMBER(15,0), 
	"SUPP_ID" NUMBER NOT NULL ENABLE, 
	"INVOICE_ID" NUMBER NOT NULL ENABLE, 
	 CONSTRAINT "ORDER_ID_PK" PRIMARY KEY ("ORDER_ID")
  USING INDEX  ENABLE
   )  DEFAULT COLLATION "USING_NLS_COMP"
/
CREATE TABLE  "XXBCM_ORDER_MGT" 
   (	"ORDER_REF" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"ORDER_DATE" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"SUPPLIER_NAME" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"SUPP_CONTACT_NAME" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"SUPP_ADDRESS" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"SUPP_CONTACT_NUMBER" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"SUPP_EMAIL" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"ORDER_TOTAL_AMOUNT" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"ORDER_DESCRIPTION" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"ORDER_STATUS" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"ORDER_LINE_AMOUNT" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_REFERENCE" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_DATE" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_STATUS" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_HOLD_REASON" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_AMOUNT" VARCHAR2(2000) COLLATE "USING_NLS_COMP", 
	"INVOICE_DESCRIPTION" VARCHAR2(2000) COLLATE "USING_NLS_COMP"
   )  DEFAULT COLLATION "USING_NLS_COMP"
/
CREATE TABLE  "XXBCM_SUPP" 
   (	"SUPP_ID" NUMBER, 
	"SUPPLIER_NAME" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
	"SUPP_CONTACT_NAME" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
	"SUPP_ADDRESS" VARCHAR2(200) COLLATE "USING_NLS_COMP", 
	"SUPP_CONTACT_NUMBER" VARCHAR2(15) COLLATE "USING_NLS_COMP", 
	"SUPP_EMAIL" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
	 CONSTRAINT "SUPP_ID_PK" PRIMARY KEY ("SUPP_ID")
  USING INDEX  ENABLE
   )  DEFAULT COLLATION "USING_NLS_COMP"
/
ALTER TABLE  "XXBCM_ORDER" ADD CONSTRAINT "FK_INVOICE" FOREIGN KEY ("INVOICE_ID")
	  REFERENCES  "XXBCM_INVOICE" ("INVOICE_ID") ENABLE
/
ALTER TABLE  "XXBCM_ORDER" ADD CONSTRAINT "FK_SUPPLIER" FOREIGN KEY ("SUPP_ID")
	  REFERENCES  "XXBCM_SUPP" ("SUPP_ID") ENABLE
/
CREATE OR REPLACE EDITIONABLE SYNONYM  "DBMS_XPLAN" FOR "LIVESQL"."ORACLE_SQL_USER_XPLAN"
/
CREATE OR REPLACE EDITIONABLE SYNONYM  "V$SESSION" FOR "LIVESQL"."ORACLE_SQL_USER_V$SESSION"
/
CREATE OR REPLACE EDITIONABLE SYNONYM  "V$SQL_PLAN_STATISTICS_ALL" FOR "LIVESQL"."ORACLE_SQL_USER_V$SQL_PLAN_S_A"
/
CREATE OR REPLACE EDITIONABLE PROCEDURE  "XXBCM_PROC" 
IS DECLARE i2 NUMBER; BEGIN FOR mgt_data IN (SELECT * FROM XXBCM_ORDER_MGT) LOOP BEGIN i2 := i2 + 1; INSERT INTO XXBCM_SUPP ( SUPP_ID SUPPLIER_NAME, SUPP_CONTACT_NAME, SUPP_ADDRESS, SUPP_CONTACT_NUMBER, SUPP_EMAIL ) VALUES ( i2, mgt_data.SUPPLIER_NAME, mgt_data.SUPP_CONTACT_NAME, mgt_data.SUPP_ADDRESS, mgt_data.SUPP_CONTACT_NUMBER, mgt_data.SUPP_EMAIL ); INSERT INTO XXBCM_INVOICE ( INVOICE_ID INVOICE_REFERENCE, INVOICE_DATE, INVOICE_STATUS, INVOICE_HOLD_REASON, INVOICE_AMOUNT, INVOICE_DESCRIPTION ) VALUES ( i2, mgt_data.INVOICE_REFERENCE, mgt_data.INVOICE_DATE, mgt_data.INVOICE_STATUS, mgt_data.INVOICE_HOLD_REASON, mgt_data.INVOICE_AMOUNT, mgt_data.INVOICE_DESCRIPTION ); INSERT INTO XXBCM_ORDER ( ORDER_ID, ORDER_REF, ORDER_DATE, ORDER_TOTAL_AMOUNT, ORDER_DESCRIPTION, ORDER_STATUS, ORDER_LINE_AMOUNT, SUPP_ID, INVOICE_ID ) VALUES ( i2, mgt_data.ORDER_REF, mgt_data.ORDER_DATE, mgt_data.ORDER_TOTAL_AMOUNT, mgt_data.ORDER_DESCRIPTION, mgt_data.ORDER_STATUS, mgt_data.ORDER_LINE_AMOUNT, i2, i2 ); EXCEPTION WHEN OTHERS THEN dbms_output.put_line('Exception occured on '||mgt_data.ORDER_REF); END; END LOOP; END; 
EXEC XXBCM_PROC; 
/